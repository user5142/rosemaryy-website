---
import Layout from '../layouts/Layout.astro';
---

<Layout title="Support">
  <div class="relative isolate px-6 pt-16 sm:pt-24 lg:px-8 min-h-[calc(100vh-64px)] flex flex-col items-center">
    <div class="mx-auto max-w-2xl pb-32 sm:pb-48 lg:pb-56 text-center">
      <h1 class="text-4xl font-bold tracking-tight text-text sm:text-6xl mb-12">Support</h1>
      
      <div class="bg-gray-50 rounded-2xl p-8 sm:p-10 shadow-sm border border-gray-100 w-full max-w-md mx-auto">
        <p class="text-base text-gray-600 mb-6 text-left">For help, please email:</p>
        
        <div class="flex items-center gap-2 bg-white rounded-lg border border-gray-200 p-2 pl-4">
          <code class="flex-1 text-text font-mono text-sm" id="email-text">support@planpanda.co</code>
          <button
            id="copy-btn"
            class="bg-black text-white px-4 py-2 rounded-md text-sm font-semibold hover:bg-gray-800 transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-900"
          >
            Copy
          </button>
        </div>

        <p class="mt-6 text-xs text-gray-500 text-left">
            We typically respond within 24 hours during business days.
        </p>
      </div>
    </div>
  </div>

  <!-- Toast Notification -->
  <div
    id="toast"
    class="fixed bottom-4 right-4 transform transition-all duration-300 translate-y-20 opacity-0 bg-gray-900 text-white px-4 py-3 rounded-lg shadow-lg flex items-center gap-2 z-50"
  >
    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5 text-green-400">
      <path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
    </svg>
    <span class="text-sm font-medium">Email copied to clipboard!</span>
  </div>
</Layout>

<script>
  const copyBtn = document.getElementById('copy-btn');
  const emailText = document.getElementById('email-text');
  const toast = document.getElementById('toast');
  let toastTimeout: number | undefined;

  copyBtn?.addEventListener('click', async () => {
    const email = emailText?.innerText || '';
    
    try {
      await navigator.clipboard.writeText(email);
      showToast();
    } catch (err) {
      console.error('Failed to copy text: ', err);
      // Fallback for older browsers
      const textArea = document.createElement("textarea");
      textArea.value = email;
      document.body.appendChild(textArea);
      textArea.select();
      try {
        document.execCommand('copy');
        showToast();
      } catch (err) {
        console.error('Fallback: Oops, unable to copy', err);
      }
      document.body.removeChild(textArea);
    }
  });

  function showToast() {
    if (!toast) return;
    
    // Reset
    clearTimeout(toastTimeout);
    
    // Show
    toast.classList.remove('translate-y-20', 'opacity-0');
    
    // Hide after 3s
    toastTimeout = window.setTimeout(() => {
      toast.classList.add('translate-y-20', 'opacity-0');
    }, 3000);
  }
</script>

